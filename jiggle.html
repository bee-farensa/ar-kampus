<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>AR Jiggle</title>
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@3.4.2/aframe/build/aframe-ar.min.js"></script>
  <style>
    #panel {
      position: absolute; top: 1rem; right: 1rem;
      width: 300px; background: rgba(255,255,255,0.9);
      padding: 1rem; border-radius: 1rem;
      font-family: monospace;
      z-index: 9999;
    }

    #back {
      position: absolute;
      top: 1rem;
      left: 1rem;
      background: #444;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 1rem;
      text-decoration: none;
      font-weight: bold;
      z-index: 9999;
    }
  </style>
</head>
<body>

<a href="index.html" id="back">⬅ Kembali ke Menu</a>

<div id="panel">
  <h2>Lirik – Jingle Institut Asia</h2>
  <pre>
Halo semuanya penerus bangsa
Raih masa depan
Di kampus impian

Institut Asia
Kuliah asyik kekinian
Institut Asia
Mari bersama gapai impian
Institut Asia
Tuk masa depan penuh harapan
Institut Asia
Terus melangkah
Siap jadi number one

We are Institut Asia
Tetap selalu jaya
Banyak mahasiswa
Berhasil gapai cita-cita
Selalu produktif
Dan juga selalu berkreatif
Dan jadilah mahasiswa
Yang berinovatif

Go beyond your limit with Asia
Gas, Mas Bro
Pasti kalian betah
Kalo sakit pasti beli obatnya di apotek
Kalo masih jomblo di Asia banyak cewek cantik

Institut Asia
Kuliah asyik kekinian
Institut Asia
Mari bersama gapai impian
Institut Asia
Tuk masa depan penuh harapan
Institut Asia
Terus melangkah
Siap jadi number one
  </pre>
</div>

<!-- A-Frame Scene -->
<a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false" vr-mode-ui="enabled: false">
  <a-assets>
    <a-asset-item id="model" src="assets/tuxedo.glb"></a-asset-item>
    <audio id="jigglesound" src="sound/jiggleAsia.mp3"></audio>
  </a-assets>

  <!-- Marker: play audio saat marker ditemukan -->
  <a-marker type="pattern" url="marker/markerasia.patt" play-audio-on-marker>
  <a-entity gltf-model="#model" scale="0.5 0.5 0.5"></a-entity>
  <a-entity sound="src: #jigglesound; autoplay: false; positional: false;"></a-entity>
</a-marker>


  <a-entity camera></a-entity>
</a-scene>

<!-- Script untuk memutar audio saat marker terdeteksi -->
<script>
  AFRAME.registerComponent('play-audio-on-marker', {
    init: function () {
      this.el.addEventListener('markerFound', () => {
        const soundEntity = this.el.querySelector('[sound]');
        if (!soundEntity) return;

        const soundComp = soundEntity.components.sound;

        // Cek apakah audio sudah selesai dimuat
        if (soundComp && soundComp.isLoaded) {
          soundComp.playSound();
          console.log("✅ Suara diputar!");
        } else {
          console.warn("❗ Sound belum siap. Menunggu untuk diputar...");
          soundEntity.addEventListener('sound-loaded', () => {
            soundComp.playSound();
            console.log("✅ Suara diputar setelah selesai loading.");
          });
        }
      });
    }
  });
</script>

</body>
</html>
